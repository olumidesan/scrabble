(this.webpackJsonpscrabble=this.webpackJsonpscrabble||[]).push([[0],{112:function(e,a,t){},113:function(e,a,t){"use strict";t.r(a);var l=t(0),r=t.n(l),n=t(12),s=t.n(n),c=(t(56),t(57),t(58),t(59),t(6)),i=t(7),o=t(9),d=t(8),m=(t(60),t(2)),p=function(){return r.a.createElement(m.a,{autoClose:8e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!1,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0})},u=t(3),v=t(48),b=t.n(v),E={A:1,B:3,C:3,D:2,E:1,F:4,G:2,H:4,I:1,J:8,K:5,L:1,M:3,N:1,O:1,P:3,Q:10,R:1,S:1,T:1,U:1,V:4,W:4,X:8,Y:4,Z:10},N={dL:2,tL:3,dW:2,tW:3},g=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var l;return Object(c.a)(this,t),(l=a.call(this,e)).populateModal=function(e){var a=document.createElement("div");a.setAttribute("class","bagPieceContainer");for(var t=function(){var e,t=n[r],s=document.createElement("div");s.setAttribute("class","bagPieceItem"),e="<div class='piece'><span class=\"letter\">".concat(t,"</span></div>"),s.innerHTML=e,s.addEventListener("click",(function(){l.setState({blankPiece:s.firstChild.firstChild.innerText}),l.toggleSelectionModal()})),a.appendChild(s)},r=0,n=Object.keys(e);r<n.length;r++)t();document.getElementById("selectionHome").appendChild(a)},l.toggleSelectionModal=function(){document.getElementById("selectionModal").classList.toggle("is-active")},l.getTilePositionOnBoard=function(e){var a=document.querySelectorAll(".tile");return[].indexOf.call(a,e)},l.populateBoard=function(e,a){var t=document.createElement("div");t.setAttribute("id","jp_".concat(a)),t.setAttribute("class","bp"),t.innerHTML=e,document.querySelectorAll(".tile")[a].appendChild(t)},l.updatePlay=function(e){if("drag"===e.eventType){if(e.name!==l.props.name){var a=document.querySelector("#".concat(e.id));null!==a&&a.remove()}}else"rackToBoard"===e.eventType?e.name!==l.props.name&&l.populateBoard(e.elementString,e.elementPosition):document.getElementById(e.id).firstChild.firstChild.innerText=e.pieceLetter},l.updateBlankPiece=function(e){if(""===l.state.blankPiece)setTimeout((function(){l.updateBlankPiece(e)}),200);else{var a=l.state.blankPiece;l.props.socket.emit("inPlayEvent",{roomID:l.props.roomID,pieceLetter:a,eventType:"updateBlank",id:e}),l.setState({blankPiece:""})}},l.componentDidMount=function(){l.populateModal(E),document.addEventListener("dragstart",(function(e){if(l.props.isTurn)try{var a=Object(u.a)(e.target.classList);(a.includes("pieceContainer")||a.includes("bp"))&&(a.includes("bp")&&l.setState({isBoardDrag:!0}),l.setState({currentPiece:e.target}))}catch(t){m.b.error("Invalid drag motion.")}else e.target.getAttribute("draggable")&&m.b.error("It's not your turn, ".concat(l.props.name,". Kindly wait your turn."))})),document.addEventListener("dragenter",(function(e){e.preventDefault(),l.props.isTurn&&e.target.className.includes("droppable")&&(e.target.style.border="0.4px solid yellow")})),document.addEventListener("dragover",(function(e){e.preventDefault()})),document.addEventListener("dragleave",(function(e){l.props.isTurn&&e.target.removeAttribute("style")})),document.addEventListener("drop",(function(e){if(e.preventDefault(),l.props.isTurn){e.target.removeAttribute("style");var a=l.state.currentPiece;if(e.target.className.includes("droppable")&&null!==a){var t=Object(u.a)(a.classList);if(t.includes("pieceContainer")||t.includes("bp")){var r=l.getTilePositionOnBoard(e.target),n=document.createElement("div");if(n.setAttribute("draggable","true"),n.setAttribute("id","jp_".concat(r)),n.setAttribute("class","bp"),""===a.firstChild.firstChild.innerText&&(l.toggleSelectionModal(),l.updateBlankPiece("jp_".concat(r))),n.innerHTML=a.innerHTML,e.target.appendChild(n),l.state.isBoardDrag){var s=a.parentNode.children,c=1===s.length?0:1;a.parentNode.removeChild(s[c]),l.setState({isBoardDrag:!1}),l.props.socket.emit("inPlayEvent",{roomID:l.props.roomID,name:l.props.name,eventType:"drag",id:a.id})}else{var i=document.getElementById(a.id);i&&i.remove()}l.props.socket.emit("inPlayEvent",{name:l.props.name,eventType:"rackToBoard",roomID:l.props.roomID,elementString:n.innerHTML,elementPosition:r}),l.setState({currentPiece:null})}}}})),l.props.socket.on("inPlay",(function(e){l.updatePlay(e)}))},l.state={blankPiece:"",currentPiece:null,isBoardDrag:!1},l}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"boardContainer"},r.a.createElement("div",{id:"selectionModal",className:"modal"},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-card bagItems"},r.a.createElement("section",{id:"selectionHome",className:"modal-card-body"}))),r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile tW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tW"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile tW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW cT"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tW"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dW"}),r.a.createElement("div",{className:"droppable tile"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"droppable tile tW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tW"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile dL"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile"}),r.a.createElement("div",{className:"droppable tile tW"}))))}}]),t}(r.a.Component),f=t(49),h=t(50),y=t(10),P=t.n(y);P.a.defaults.baseURL="http://".concat(window.serverIP,":5005/api/v1"),P.a.defaults.headers.post["Content-Type"]="application/json",P.a.defaults.headers.common.Authorization="Bearer ".concat(window.b2ctk),P.a.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)})),P.a.interceptors.response.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)}));var k=function(e){return P.a[e.requestType](e.url,e.payload).then((function(e){return e.data})).catch((function(e){return console.log(e.data)}))},w=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var l;return Object(c.a)(this,t),(l=a.call(this,e)).getPiecesAbove=function(e){var a="",t=15;if(l.isBoardEdge("top",e))return a;for(;;){var r=e-t,n=l.boardTiles[r];if(null===n.firstChild)break;if(a+=l.getWordFromPiece(n.firstChild),t+=15,l.isBoardEdge("top",r))break}return a.split("").reverse().join("")},l.getPiecesDown=function(e){var a="",t=15;if(l.isBoardEdge("down",e))return a;for(;;){var r=e+t,n=l.boardTiles[r];if(null===n.firstChild)break;if(a+=l.getWordFromPiece(n.firstChild),t+=15,l.isBoardEdge("down",r))break}return a},l.updatePlayWeight=function(e,a,t){a.includes("bp")&&e.includes("dL")?l.playWeights.push([t,"dL"]):a.includes("bp")&&e.includes("tL")?l.playWeights.push([t,"tL"]):a.includes("bp")&&e.includes("dW")?l.playWeights.push([t,"dW"]):a.includes("bp")&&e.includes("tW")&&l.playWeights.push([t,"tW"])},l.getPiecesLeft=function(e){var a="",t=1;if(l.isBoardEdge("left",e))return a;for(;;){var r=e-t,n=l.boardTiles[r];if(null===n.firstChild)break;if(a+=l.getWordFromPiece(n.firstChild),t+=1,l.isBoardEdge("left",r))break}return a.split("").reverse().join("")},l.getPiecesRight=function(e){var a="",t=1;if(l.isBoardEdge("right",e))return a;for(;;){var r=e+t,n=l.boardTiles[r];if(null===n.firstChild)break;if(a+=l.getWordFromPiece(n.firstChild),t+=1,l.isBoardEdge("right",r))break}return a},l.getWordFromPiece=function(e){return e.firstChild.textContent.slice(0,1)},l.getValueFromPiece=function(e){return parseInt(e.firstChild.textContent.slice(1))},l.isBoardEdge=function(e,a){return"down"===e?a>=0&&a<15:"top"===e?a>209&&a<225:"left"===e?a%15===0:a%15===14},l.getPlayedWords=function(e){var a,t,r=[],n=l.getPlayDirection.cachedDirection;return e.forEach((function(e,s){var c=l.getTilePositionOnBoard(e.parentNode),i=l.getWordFromPiece(l.boardTiles[c]),o=Object(u.a)(l.boardTiles[c].classList),d=Object(u.a)(e.classList);l.updatePlayWeight(o,d,i),0===s?((t="".concat(l.getPiecesLeft(c)).concat(i).concat(l.getPiecesRight(c))).length>1&&r.push(t),(a="".concat(l.getPiecesAbove(c)).concat(i).concat(l.getPiecesDown(c))).length>1&&r.push(a)):"right"===n?(a="".concat(l.getPiecesAbove(c)).concat(i).concat(l.getPiecesDown(c))).length>1&&r.push(a):(t="".concat(l.getPiecesLeft(c)).concat(i).concat(l.getPiecesRight(c))).length>1&&r.push(t)})),r},l.computeScore=function(e){var a=0;return e.forEach((function(e){var t=1;Object(u.a)(e).forEach((function(e){var r=E[e];l.playWeights.forEach((function(a){e===a[0]&&(["dL","tL"].includes(a[1])?r*=N[a[1]]:["tW","dW"].includes(a[1])&&(t=N[a[1]]))})),a+=r})),a*=t})),a},l.playTurn=function(){if(l.props.isTurn){l.playWeights=[];var e=l.props.getPlayedPieces();if(!(e.length>0))return void m.b.error("Err...You haven't played anything. You can alternatively skip your turn.");if(!l.validateBoardPlay(e))return void m.b.error("Sorry, that's an invalid move.");var a=l.getPlayedWords(e);k({requestType:"post",url:"/words-check",payload:{words:a}}).then((function(t){if(t.error)m.b.error(t.error);else{var r=l.getPiecesOnRack(),n=l.computeScore(a);l.getFromBag(e.length).then((function(e){e.pieces.forEach((function(e){return r.push(e)}))})).then((function(){l.setState({currentPieces:r}),l.populateRack(r),l.props.socket.emit("playEvent",{roomID:l.props.roomID,name:l.props.name,score:n,word:a[0]})}))}}))}},l.skipTurn=function(){l.props.isTurn&&(window.confirm("Are you sure you want to skip your turn?")&&(l.recallPieces(),l.props.socket.emit("playEvent",{isTurnSkipped:!0,name:l.props.name,roomID:l.props.roomID})))},l.swapPieces=function(){},l.getPlayDirection=function(e){for(var a=0,t="down",r=l.getTilePositionOnBoard(e[0].parentNode),n=1;n<16;n++){var s=r+n;if(s>224)break;var c=l.boardTiles[s].firstChild;null!==c&&Object(u.a)(c.classList).includes("bp")&&(15===n?(a+=15,t="down"):(a+=1,t="right"))}return!(a>15)&&t},l.validateBoardPlay=function(e){var a=!1,t=0===document.querySelectorAll(".vP").length,r=15;if(1===e.length){if(t)return!1;a=l.validateNearestNeighbours(e)>=1}else{var n=l.getPlayDirection(e);if(!1===n)return!1;if(l.getPlayDirection.cachedDirection=n,"right"===n&&(r=1),t){if(l.getValidPlayCount(e,r,t)<e.length-1)return!1;a=l.checkIfPlayWasCentered(e)}else{if(l.validateNearestNeighbours(e)<1)return!1;if(l.getValidPlayCount(e,r,t)<e.length-1)return!1;a=!0}}return a},l.validateNearestNeighbours=function(e){var a=0;return e.forEach((function(e){var t,r,n,s,c=[],i=l.getTilePositionOnBoard(e.parentNode);t=i-1,n=i+15,s=i+1,(r=i-15)>=0&&c.push(l.boardTiles[r]),t>=0&&c.push(l.boardTiles[t]),n<=224&&c.push(l.boardTiles[n]),s<=224&&c.push(l.boardTiles[s]),c.forEach((function(e){null!==e.firstChild&&Object(u.a)(e.firstChild.classList).includes("vP")&&(a+=1)}))})),a},l.getValidPlayCount=function(e,a,t){var r=0;return e.forEach((function(n,s){if(s+1!==e.length){var c=l.getTilePositionOnBoard(n.parentNode),i=l.boardTiles[c+a];if(null===i.firstChild)return!1;var o=Object(u.a)(i.firstChild.classList);(t?o.includes("bp"):o.includes("bp")||o.includes("vP"))&&(r+=1)}})),r},l.checkIfPlayWasCentered=function(e){var a=!1;return e.forEach((function(e){var t=l.boardTiles[l.getTilePositionOnBoard(e.parentNode)];Object(u.a)(t.classList).includes("cT")&&(a=!0)})),a},l.getTilePositionOnBoard=function(e){return[].indexOf.call(l.boardTiles,e)},l.makeDraw=function(e){e.preventDefault();var a=l.inPlaceShuffle(l.props.players);l.props.socket.emit("drawEvent",{playOrder:a,roomID:l.props.roomID});var t=document.getElementById("drawButton");null!==t&&t.remove()},l.getFromBag=function(e){return k({payload:{},requestType:"get",url:"/bag/".concat(e)})},l.clearPlayedPieces=function(){var e=l.props.getPlayedPieces();e.length>0&&e.forEach((function(e){return e.remove()}))},l.shufflePieces=function(){var e=l.getPiecesOnRack();l.populateRack(l.inPlaceShuffle(e))},l.recallPieces=function(){l.props.isTurn&&(l.props.socket.emit("recallEvent",{name:l.props.name,roomID:l.props.roomID}),l.clearPlayedPieces(),l.populateRack(l.state.currentPieces))},l.inPlaceShuffle=function(e){for(var a=e.length-1;a>0;a--){var t=Math.floor(Math.random()*(a+1)),l=e[a];e[a]=e[t],e[t]=l}return e},l.getPiecesOnRack=function(){var e=[];return document.querySelectorAll(".pieceContainer").forEach((function(a){e.push({letter:a.textContent.slice(0,1),value:parseInt(a.textContent.slice(1))})})),e},l.populateRack=function(e){for(var a=document.querySelector(".rackPieces");a.firstChild;)a.firstChild.remove();for(var t=0,l=Object.entries(e);t<l.length;t++){var r,n=Object(h.a)(l[t],2),s=n[0],c=n[1],i=document.createElement("div");i.setAttribute("id","userPiece".concat(s)),i.setAttribute("class","pieceContainer"),i.setAttribute("draggable","true"),r='<div draggable="false" class=\'piece\'><span draggable="false" class="letter">'.concat(c.letter,'</span><span draggable="false" class="value">').concat(c.value,"</span></div>"),i.innerHTML=r,a.appendChild(i)}},l.toggleBag=function(){if(0!==Object.keys(l.props.bagItems).length){var e=document.getElementById("bagHome");e.innerHTML="",e.appendChild(l.updateBag(l.props.bagItems)),document.getElementById("bagModal").classList.toggle("is-active")}else m.b.info("Kindly wait until the draw has been made.")},l.updateBag=function(e){var a=document.createElement("div");a.setAttribute("class","bagPieceContainer");var t,l=Object(f.a)(e);try{for(l.s();!(t=l.n()).done;){var r,n=t.value,s=document.createElement("div");s.setAttribute("class","bagPieceItem"),r="<div><div class='piece'><span class=\"letter\">".concat(n[0],'</span></div></div>\n            <div class="numberLeft"><span>').concat(n[1]," left</span></div>"),s.innerHTML=r,a.appendChild(s)}}catch(c){l.e(c)}finally{l.f()}return a},l.componentDidMount=function(){l.boardTiles=document.querySelectorAll(".tile"),l.props.socket.on("recallPieces",(function(e){e.name!==l.props.name&&l.clearPlayedPieces()})),l.getFromBag(7-l.state.currentPieces.length).then((function(e){l.setState({currentPieces:e.pieces},(function(){l.populateRack(l.state.currentPieces)}))}))},l.playWeights=[],l.boardTiles=null,l.state={currentPieces:[]},l}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"rack"},r.a.createElement("div",{id:"bagModal",className:"modal"},r.a.createElement("div",{onClick:this.toggleBag,className:"modal-background"}),r.a.createElement("div",{className:"modal-card bagItems"},r.a.createElement("section",{id:"bagHome",className:"modal-card-body"}))),r.a.createElement("div",{className:"rackPieces"}),r.a.createElement("div",{className:"rackButtons"},r.a.createElement("div",{onClick:this.toggleBag,className:"bag"},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-shopping-bag fa-2x"})),r.a.createElement("span",{className:"bagLength"},this.props.bagLength)),r.a.createElement("div",{className:"buttons is-fullwidth has-addons"},r.a.createElement("button",{title:"Recall Pieces",onClick:this.recallPieces,className:"button rackButton is-link"},r.a.createElement("i",{className:"fas fa-undo"})),r.a.createElement("button",{title:"Shuffle Pieces",onClick:this.shufflePieces,className:"button rackButton is-link"},r.a.createElement("i",{className:"fas fa-random"})),r.a.createElement("button",{title:"Swap Pieces",onClick:this.swapPieces,className:"button rackButton is-link"},r.a.createElement("i",{className:"fas fa-exchange-alt"})),r.a.createElement("button",{title:"Skip Turn",onClick:this.skipTurn,className:"button rackButton is-link"},r.a.createElement("i",{className:"fas fa-forward"})),r.a.createElement("button",{title:"Play",className:"button rackButton is-success",onClick:this.playTurn},r.a.createElement("i",{className:"fas fa-play"})),this.props.isHost?r.a.createElement("button",{id:"drawButton",title:"Draw",className:"button rackButton is-warning",onClick:this.makeDraw},"Draw"):null)))}}]),t}(l.Component),I=function(e){var a=e.players.map((function(a,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.name===a?"".concat(a," (You)"):a),r.a.createElement("td",{id:"score_".concat(a)},"0"),r.a.createElement("td",{id:"turn_".concat(a)},"No"))}));return r.a.createElement("div",{className:"scoresTable"},r.a.createElement("table",{className:"table is-hoverable is-stripped is-fullwidth is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Score"),r.a.createElement("th",null,"Turn?"))),r.a.createElement("tbody",null,a)))};var L=function(e){var a=r.a.createElement("div",null,r.a.createElement("div",null,"Connected players: ",r.a.createElement("b",null,e.connectedPlayers,"/",e.numOfPlayers)),r.a.createElement("hr",null),r.a.createElement("div",{className:"subtitle is-7"},r.a.createElement("span",{role:"img","aria-label":"info"},"\u26a0\ufe0f")," Don't forget to share your Game ID with the other players you want to join your game session.")),t=r.a.createElement("div",null,r.a.createElement("div",null,"You're in the waiting room. The game will start once all players like you have joined the host's session.")),l=r.a.createElement("div",{className:"waitingMessage"},r.a.createElement("div",{className:"centralize title is-5"},r.a.createElement("span",null,"Waiting for all players to join...")),r.a.createElement("hr",null),r.a.createElement("div",null,"Your name: ",r.a.createElement("b",null,e.name)),r.a.createElement("div",null,"Game ID: ",r.a.createElement("b",null,e.roomID)),e.isHost?a:t);return r.a.createElement("div",null,l)};var T=function(e){return r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"title centralize"},"SCRABBLE"),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{onClick:e.registerHost,className:"button mainButton is-success"},"Host Game")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{onClick:e.showJoinForm,className:"button mainButton is-link"},"Join Game"))))};var C=function(e){return r.a.createElement("div",{className:"joinForm"},r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Your Name: ",r.a.createElement("span",{className:"imp"},"*")),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onChange:e.saveUser,name:"name",placeholder:"e.g. Smeagol"}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"field is-expanded"},r.a.createElement("label",{className:"label"},"Game ID: ",r.a.createElement("span",{className:"imp"},"*")),r.a.createElement("div",{className:"field has-addons"},r.a.createElement("p",{className:"control"},r.a.createElement("span",{className:"button is-static"},"SC-")),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onChange:e.saveID,name:"gameID",placeholder:"e.g. 903318"}))))),r.a.createElement("div",{className:"centralize field is-grouped is-grouped-centered"},r.a.createElement("button",{style:{marginRight:"5px"},className:"button optionButton is-fullwidth is-link",onClick:e.joinRoom},"Join"),r.a.createElement("button",{style:{marginLeft:"5px"},className:"button optionButton is-fullwidth is-light",onClick:e.showHome},"Cancel"))))};var S=function(e){return r.a.createElement("div",{className:"configForm"},r.a.createElement("form",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Your Name: ",r.a.createElement("span",{className:"imp"},"*")," "),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onChange:e.saveUser,name:"text",placeholder:"e.g: Orihime"}))),r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select is-fullwidth"},r.a.createElement("select",{onChange:e.savePlayers},r.a.createElement("option",{value:"",defaultValue:!0},"Choose the number of players"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4")))),r.a.createElement("br",null),r.a.createElement("div",{className:"centralize field is-grouped is-grouped-centered"},r.a.createElement("button",{style:{marginRight:"5px"},className:"button optionButton is-fullwidth is-link",onClick:e.startGame},"Start"),r.a.createElement("button",{style:{marginLeft:"5px"},className:"button optionButton is-fullwidth is-light",onClick:e.showHome},"Cancel"))))},D=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var l;return Object(c.a)(this,t),(l=a.call(this,e)).getPlayedPieces=function(){return document.querySelectorAll(".bp")},l.concretizePlayedPieces=function(){var e=l.getPlayedPieces();e.length>0&&e.forEach((function(e){e.removeAttribute("class"),e.removeAttribute("id"),e.setAttribute("class","vP"),e.setAttribute("draggable",!1),e.parentNode.setAttribute("draggable",!1)}))},l.showJoin=function(){document.querySelector(".landing").style.display="none",document.querySelector(".joinForm").style.display="block"},l.registerHost=function(){l.state.isHost||l.setState({isHost:!0,roomID:l.roomID}),document.querySelector(".landing").style.display="none",document.querySelector(".configForm").style.display="block"},l.saveID=function(e){l.setState({roomID:"SC-".concat(e.target.value).toString()})},l.saveUser=function(e){l.setState({name:e.target.value})},l.savePlayers=function(e){l.numOfPlayers=parseInt(e.target.value)},l.startGame=function(e){e.preventDefault(),l.state.name.length<3?m.b.error("Kindly enter a longer name. Don't be shy."):[2,3,4].includes(l.numOfPlayers)?(document.querySelector(".configForm").style.display="none",document.querySelector(".waitingMessage").style.display="block",l.socket.emit("join",{name:l.state.name,roomID:l.roomID})):m.b.error("Kindly select a valid number of players")},l.joinRoom=function(e){(e.preventDefault(),l.state.name.length<3)?m.b.error("Kindly enter a longer name. Don't be shy."):9===l.state.roomID.length?k({requestType:"get",url:"/rooms",payload:{}}).then((function(e){e.rooms.includes(l.state.roomID)?(l.socket.emit("join",{name:l.state.name,roomID:l.state.roomID}),document.querySelector(".joinForm").style.display="none",document.querySelector(".waitingMessage").style.display="block"):m.b.error("\ud83d\ude2c There's currently no game session with ID, ".concat(l.state.roomID,"."))})):m.b.error("Sorry, that's an invalid Game ID.")},l.showHome=function(e){e.preventDefault(),l.setState({isHost:!1,name:""}),l.numOfPlayers=0,document.querySelector(".landing").style.display="block",document.querySelector(".joinForm").style.display="none",document.querySelector(".configForm").style.display="none"},l.componentDidMount=function(){document.querySelector(".waitingMessage").style.display="none",document.querySelector(".joinForm").style.display="none",document.querySelector(".configForm").style.display="none",document.querySelector(".entry").style.display="none",l.socket.on("reconnect_attempt",(function(){l.socket.io.opts.transports=["polling","websocket"],document.getElementById("connstatus").setAttribute("title","Reconnecting..."),document.getElementById("connstatus").setAttribute("class","has-text-warning")})),l.socket.on("connect",(function(){document.getElementById("connstatus").setAttribute("title","Server Connection: Good"),document.getElementById("connstatus").setAttribute("class","has-text-success"),l.state.gameStarted&&l.socket.emit("join",{roomID:l.roomID,isReconnection:!0})})),l.socket.on("disconnect",(function(){l.state.gameStarted&&m.b.error("Lost connection to the game server. Trying to reconnect..."),document.getElementById("connstatus").setAttribute("title","Connection Lost"),document.getElementById("connstatus").setAttribute("class","has-text-danger")})),l.socket.on("joinedRoom",(function(e){l.setState({players:[].concat(Object(u.a)(l.state.players),[e.name]),connectedPlayers:l.state.connectedPlayers+1},(function(){l.state.isHost&&l.state.connectedPlayers===l.numOfPlayers&&l.socket.emit("fromHost",{allPlayers:l.state.players,roomID:l.state.roomID,gameStarted:!0})}))})),l.socket.on("drawDone",(function(e){var a,t=e.playOrder[0],r="";l.setState({players:e.playOrder,bagLength:e.bagLength,bagItems:e.bagItems}),t===l.state.name?(l.setState({isTurn:!0}),a="You get to play first"):a="".concat(t," gets to play first"),document.getElementById("turn_".concat(t)).innerText="Yes",e.playOrder.forEach((function(a,t){a===l.state.name&&(a="".concat(a," (You)")),t+1===e.playOrder.length?r+=a:r+="".concat(a,", then ")})),m.b.warn("".concat(a,". Also note that the turn order is, ").concat(r,"."))})),l.socket.on("gameChannel",(function(e){!0===e.gameStarted&&(l.setState({gameStarted:!0,players:l.state.isHost?Object(u.a)(l.state.players):Object(u.a)(e.allPlayers),connectedPlayers:l.state.isHost?l.state.connectedPlayers:e.allPlayers.length}),document.querySelector(".entry").removeAttribute("style"),document.querySelectorAll(".configElements").forEach((function(e){e.remove()})));var a=l.state.isHost?"All players have joined. Make a draw using the yellow button on your button rack. You'll":"The host will make a draw, and you'll";m.b.success("\u2728 Welcome, ".concat(l.state.name,"! ").concat(a," be notified (just like this) of who gets to play first. Good luck!"))})),l.socket.on("validPlay",(function(e){var a,t;if(l.concretizePlayedPieces(),e.playerToPlay===l.state.name?l.setState({isTurn:!0,bagItems:e.bagItems,bagLength:e.bagLength},(function(){return a="your turn to play"})):l.setState({isTurn:!1,bagItems:e.bagItems,bagLength:e.bagLength},(function(){return a="".concat(e.playerToPlay,"'s turn to play")})),l.state.players.forEach((function(a){a===e.playerToPlay?document.getElementById("turn_".concat(a)).innerText="Yes":document.getElementById("turn_".concat(a)).innerText="No"})),e.isTurnSkipped)t=e.name===l.state.name?"You skipped your turn":t="Turn skipped by ".concat(e.name);else{t=e.name===l.state.name?'You played "'.concat(e.word,'" worth ').concat(e.score," points"):"".concat(e.name,' played "').concat(e.word,'" worth ').concat(e.score," points");var r=document.getElementById("score_".concat(e.name)),n=parseInt(r.innerText);r.innerText=n+e.score}m.b.info("".concat(t,". It's ").concat(a,"."))}))},l.numOfPlayers=0,l.socket=b()("http://".concat(window.serverIP,":5005"),{transports:["websocket"]}),l.roomID="SC-".concat(window.crypto.getRandomValues(new Uint32Array(1))[0].toString().slice(0,6)),l.state={name:"",roomID:"",players:[],bagItems:{},isTurn:!1,isHost:!1,bagLength:100,gameStarted:!1,connectedPlayers:0},l}return Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",{className:"configElements"},r.a.createElement(T,{registerHost:this.registerHost,showJoinForm:this.showJoin}),r.a.createElement(S,{savePlayers:this.savePlayers,saveUser:this.saveUser,showHome:this.showHome,startGame:this.startGame}),r.a.createElement(C,{saveID:this.saveID,saveUser:this.saveUser,joinRoom:this.joinRoom,showHome:this.showHome}),r.a.createElement(L,{name:this.state.name,roomID:this.state.roomID,isHost:this.state.isHost,numOfPlayers:this.numOfPlayers,connectedPlayers:this.state.connectedPlayers})),a=r.a.createElement("div",{className:"entry columns is-vcentered"},r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement(g,{roomID:this.state.roomID,socket:this.socket,name:this.state.name,isTurn:this.state.isTurn})),r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column"}),r.a.createElement("div",{className:"column is-one-third"},r.a.createElement("div",{className:"extras"},r.a.createElement("div",{className:"connection"},r.a.createElement("span",{id:"connstatus"},r.a.createElement("i",{className:"fas fa-wifi"})),"\xa0"),r.a.createElement(I,{socket:this.socket,name:this.state.name,players:this.state.players}),this.state.gameStarted?r.a.createElement(w,{socket:this.socket,name:this.state.name,roomID:this.state.roomID,isHost:this.state.isHost,isTurn:this.state.isTurn,players:this.state.players,bagItems:this.state.bagItems,bagLength:this.state.bagLength,gameStarted:this.state.gameStarted,getPlayedPieces:this.getPlayedPieces}):null)));return r.a.createElement("div",{className:"gameSpace"},a,e)}}]),t}(l.Component),B=(t(112),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(D,null),r.a.createElement(p,null))}}]),t}(r.a.Component));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root"))},51:function(e,a,t){e.exports=t(113)},56:function(e,a,t){},57:function(e,a,t){},59:function(e,a,t){},93:function(e,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.1f658b70.chunk.js.map