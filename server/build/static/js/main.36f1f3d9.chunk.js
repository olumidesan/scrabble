(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(53),s=r.n(a),i=(r(60),r(61),r(7)),l=r(4),o=r(5),u=r(3),d=r(54),b="{{ ip }}"===window.apiURL?"http://192.168.0.166:5005":window.apiURL,j="".concat(b,"/api/v1"),f={normal:"bg-white",tripleWord:"bg-red-700",startTile:"bg-gray-500",doubleLetter:"bg-blue-400",tripleLetter:"bg-blue-800",doubleWord:"bg-yellow-500"};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase()};var m=Object(d.io)(b,{transports:["websocket","polling"]}),x=c.a.createContext(),p=c.a.createContext(),h=c.a.createContext(),O=c.a.createContext(),v=r(28),g=r.n(v),y=r(0),w=function(e){return window.crypto.getRandomValues(new Uint32Array(1))[0].toString().slice(0,e)},N=function(e){return e.match(/^[0-9a-zA-Z]+$/)},k=function(e){return Object(y.jsx)(g.a,{start:e,end:e,duration:1.5})},D=function(e,t,r,n){e.on(t,(function(e){e.name!==r&&n(e)}))},I=function(e){return JSON.parse(e.dataTransfer.getData("draggedPiece"))},C=function(){return Object(y.jsx)("div",{className:"block",children:Object(y.jsxs)("div",{className:"flex",children:[Object(y.jsxs)("div",{title:"A piece must be played on this tile at the beginning of the game",className:"flex-1",children:[Object(y.jsx)("span",{className:"".concat(f.startTile," pr-5 h-6 w-8 border-2 border-black")}),Object(y.jsx)("span",{className:"pl-2",children:"Start Point"})]}),Object(y.jsxs)("div",{title:"The total score of the letter on this tile is doubled",className:"flex-1",children:[Object(y.jsx)("span",{className:"".concat(f.doubleLetter," pr-5 h-6 w-8 border-2 border-black")}),Object(y.jsx)("span",{className:"pl-2",children:"Double Letter"})]}),Object(y.jsxs)("div",{title:"The total score of the letter on this tile is tripled",className:"flex-1",children:[Object(y.jsx)("span",{className:"".concat(f.tripleLetter," pr-5 h-6 w-8 border-2 border-black")}),Object(y.jsx)("span",{className:"pl-2",children:"Triple Letter"})]}),Object(y.jsxs)("div",{title:"The total score of the word played is doubled when a piece is on this tile",className:"flex-1",children:[Object(y.jsx)("span",{className:"".concat(f.doubleWord," pr-5 h-6 w-8 border-2 border-black")}),Object(y.jsx)("span",{className:"pl-2",children:"Double Word"})]}),Object(y.jsxs)("div",{title:"The total score of the word played is tripled when a piece is on this tile",className:"flex-1",children:[Object(y.jsx)("span",{className:"".concat(f.tripleWord," pr-5 h-6 w-8 border-2 border-black")}),Object(y.jsx)("span",{className:"pl-2",children:"Triple Word"})]})]})})},P=function(e){var t=e.id,r=e.tileID,c=e.char,a=e.weight,s=e.onBoard,i=e.isPlayed,l=e.isStatic,o=e.isTransformed,d=e.dragEndHandler,b=Object(n.useRef)(),j=Object(n.useContext)(h),f=j.validDrag,m=j.setValidDrag,x=Object(n.useState)({id:t,tileID:r,char:c,weight:a,onBoard:s,isTransformed:o,isStatic:l,isPlayed:i}),p=Object(u.a)(x,2),O=p[0],v=(p[1],function(e){e.stopImmediatePropagation(),d&&f.current&&!function(e){return"none"===e.dataTransfer.dropEffect}(e)&&d(O)}),g=function(e){e.stopPropagation(),e.stopImmediatePropagation(),m(!0),function(e,t){e.dataTransfer.setData("draggedPiece",JSON.stringify(t))}(e,O)},w=function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),m(!1)},N=function(e){return e.preventDefault()},k=function(e){return e.preventDefault()},D=function(e){return e.preventDefault()};Object(n.useEffect)((function(){return b.current.addEventListener("drop",w)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragend",v)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragover",N)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragleave",D)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragstart",g)})),Object(n.useEffect)((function(){return b.current.addEventListener("dragenter",k)}));var I=O.weight<10?"absolute relative right-0.5 bottom-0.5":"absolute relative right-1.5 bottom-0.5",C="".concat(l?"h-3/4":"h-full"," ").concat(o?"bg-yellow-300":""," ").concat(" "===O.char?"flex-col-reverse":""," cursor-pointer hover:text-gray-700 flex flex-col ").concat(s?"w-full":"w-14 border"," text-black bg-yellow-200 border-black");return Object(y.jsxs)("div",{ref:b,draggable:!i,className:C,children:[Object(y.jsx)("div",{className:"block self-center w-4/5 text-4xl font-bold",children:Object(y.jsx)("span",{style:{top:"0.4rem"},className:"absolute ".concat(o?"italic pr-2":""," relative"),children:O.char})}),Object(y.jsx)("div",{className:"block self-end w-1/5 text-xs",children:Object(y.jsx)("span",{className:I,children:O.weight})})]})},T=r(117),E=Object(n.forwardRef)((function(e,t){Object(n.useImperativeHandle)(t,(function(){return{addPiece:function(e){m(e)},removePiece:function(){m(null)},hasPiece:function(){return null!==j&&void 0!==j},getPiece:function(){return Object(l.a)(Object(l.a)({},j.props),{},{tileType:e.type})}}}));var r="",c=e.type,a=e.id,s=Object(n.useRef)(),o=Object(n.useContext)(p),d=Object(n.useState)(e.playedPiece),b=Object(u.a)(d,2),j=b[0],m=b[1],h=Object(n.useContext)(x),O=h.player,v=h.playedTiles,g=h.usedTiles,w=h.setPlayedTiles,N=function(e){g.current.includes(e.tileID)||r!==a&&m(null)},k=function(t){var n=I(t);if(!g.current.includes(n.tileID)){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var c=n.id,s=n.char,l=n.weight,u=n.isTransformed;if(r=n.tileID," "===s)e.setRequestChoosePiece({tileID:a,pieceID:c,status:!0});else{e.setRequestChoosePiece({tileID:"",pieceID:c,status:!1});var d=Object(y.jsx)(P,{id:c,char:s,onBoard:!0,weight:l,tileID:a,isTransformed:u,dragEndHandler:N});o.emit("inPlayEvent",{roomID:O.current.roomID,pieceData:{id:c,char:s,weight:l,tileID:a,prevTileID:r,isTransformed:u,onBoard:!0}}),w([].concat(Object(i.a)(v.current),[a])),m(d)}}},D=function(e){return e.preventDefault()},C=function(e){return e.preventDefault()},E=function(e){return e.preventDefault()};return Object(n.useEffect)((function(){return O.current.turn?s.current.addEventListener("drop",k):s.current.removeEventListener("drop",k),function(){return s.current.removeEventListener("drop",k)}}),[O.current.turn]),Object(n.useEffect)((function(){return O.current.turn?s.current.addEventListener("dragover",D):s.current.removeEventListener("dragover",D),function(){return s.current.removeEventListener("dragover",D)}}),[O.current.turn]),Object(n.useEffect)((function(){return O.current.turn?s.current.addEventListener("dragleave",E):s.current.removeEventListener("dragleave",E),function(){return s.current.removeEventListener("dragleave",E)}}),[O.current.turn]),Object(n.useEffect)((function(){return O.current.turn?s.current.addEventListener("dragenter",C):s.current.removeEventListener("dragenter",C),function(){return s.current.removeEventListener("dragenter",C)}}),[O.current.turn]),Object(y.jsxs)("div",{id:a,ref:s,className:"".concat(f[c]," flex flex-col justify-around items-center h-14 w-14 border border-black border-opacity-70"),children:["startTile"!==e.type||j?null:Object(y.jsx)("div",{className:"justify-center items-center",children:Object(y.jsx)(T.a,{fill:"white",strokeWidth:"0",size:24})}),j]})}));function S(e){var t=Object(n.useContext)(x).bag,r="chooseLetter"===e.mode?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(y.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:Object(y.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(y.jsxs)("div",{className:"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t",children:[Object(y.jsx)("h3",{className:"text-2xl font-semibold",children:"Wildcard Transformation"}),Object(y.jsx)("div",{className:"text-md pt-1 text-gray-500",children:"Choose a piece to replace the wildcard with"})]}),Object(y.jsx)("div",{className:"relative pt-7 p-10 flex justify-center flex-wrap",children:Object.values(t.current.pieces).filter((function(e){return" "!==e.piece})).map((function(t,r){return Object(y.jsx)("div",{onClick:function(){return e.modalHandler(t.piece)},className:"mx-4 my-4",children:Object(y.jsx)(P,{char:t.piece,weight:0})},r)}))})]})})}),Object(y.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(y.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:Object(y.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(y.jsx)("div",{className:"flex items-start justify-center pt-5 p-4 border-b border-solid border-blueGray-200 rounded-t",children:Object(y.jsx)("h3",{className:"text-2xl font-semibold",children:"Contents of the Scrabble Bag"})}),Object(y.jsx)("div",{className:"relative pt-7 p-10 flex justify-center flex-wrap",children:Object.values(t.current.pieces).map((function(e,t){return Object(y.jsxs)("div",{className:"mx-4 my-4",children:[Object(y.jsx)(P,{isStatic:!0,char:e.piece,weight:e.weight}),Object(y.jsxs)("div",{className:"self-center mt-1 text-xs text-gray-900",children:[e.number," left"]})]},t)}))})]})})}),Object(y.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]});return e.show?r:null}var z=r(6),L=r.n(z),W=r(8),R=r(16),G=r.n(R);G.a.defaults.baseURL=j,G.a.defaults.headers.post["Content-Type"]="application/json",G.a.defaults.headers.common.Authorization="Bearer ".concat(window.b2ctk),G.a.interceptors.request.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)})),G.a.interceptors.response.use((function(e){return e}),(function(e){return console.log(e),Promise.reject(e)}));var F=function(e){return G.a[e.requestType](e.url,e.payload).then((function(e){return e.data})).catch((function(e){return console.log(e.data)}))};function A(e){var t=Object(n.useState)(e),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useRef)(c);return[c,Object(n.useCallback)((function(e){s.current="function"===typeof e?e(s.current):e,a(s.current)}),[]),s]}var Y=15,H=function(e){var t=[],r=Object(n.useRef)([]),c=Object(n.useContext)(p),a=A({tileID:"",pieceID:"",status:!1}),s=Object(u.a)(a,3),l=(s[0],s[1]),d=s[2],b=Object(n.useContext)(x),j=b.player,f=b.playFlag,m=b.usedTiles,h=b.setPlayFlag,O=b.playedTiles,v=b.setPlayedWords,g=b.setPlayedTiles,w=b.recallFlag,N=b.setRecallFlag;Object(n.useEffect)((function(){D(c,"inPlay",j.current.name,(function(e){var t=e.pieceData,r=Object(y.jsx)(P,{isPlayed:!1,id:t.id,char:t.char,weight:t.weight,tileID:t.tileID,onBoard:t.onBoard,isTransformed:t.isTransformed});t.toRackMove?t.tileID&&!m.current.includes(t.tileID)&&(z(t.tileID),g(O.current.filter((function(e){return e!==t.tileID})))):(t.prevTileID&&(z(t.prevTileID),g(O.current.filter((function(e){return e!==t.prevTileID})))),L(t.tileID,r),j.current.turn||g([].concat(Object(i.a)(O.current),[t.tileID])))}))}),[j.current]),Object(n.useEffect)((function(){D(c,"recallPieces",j.current.name,(function(e){return N(!0)}))}),[j.current]),Object(n.useEffect)((function(){if(w.current){var e,t=Object(o.a)(O.current);try{for(t.s();!(e=t.n()).done;){var r=e.value;z(r)}}catch(n){t.e(n)}finally{t.f()}N(!1),g([])}}),[w.current]),Object(n.useEffect)((function(){f.current&&(v(R()),h(!1))}),[f.current]),Object(n.useEffect)((function(){r.current=Array(t.length*Y).fill().map((function(e,t){return r.current[t]}))}),[t.length]);for(var k=function(e){var n=[],c=e*Y;if(0===e||14===e)for(var a=function(e){var t="normal";3!==e&&11!==e||(t="doubleLetter"),0!==e&&7!==e&&14!==e||(t="tripleWord");var a=Object(y.jsx)(E,{type:t,id:c+e,setRequestChoosePiece:l,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},s=0;s<Y;s++)a(s);if(1===e||13===e)for(var i=function(e){var t="normal";1!==e&&13!==e||(t="doubleWord"),5!==e&&9!==e||(t="tripleLetter");var a=Object(y.jsx)(E,{type:t,id:c+e,setRequestChoosePiece:l,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},o=0;o<Y;o++)i(o);if(2===e||12===e)for(var u=function(e){var t="normal";2!==e&&12!==e||(t="doubleWord"),6!==e&&8!==e||(t="doubleLetter");var a=Object(y.jsx)(E,{type:t,id:c+e,setRequestChoosePiece:l,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},d=0;d<Y;d++)u(d);if(3===e||11===e)for(var b=function(e){var t="normal";3!==e&&11!==e||(t="doubleWord"),0!==e&&7!==e&&14!==e||(t="doubleLetter");var a=Object(y.jsx)(E,{type:t,id:c+e,setRequestChoosePiece:l,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},j=0;j<Y;j++)b(j);if(4===e||10===e)for(var f=function(e){var t="normal";4!==e&&10!==e||(t="doubleWord");var a=Object(y.jsx)(E,{type:t,id:c+e,setRequestChoosePiece:l,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},m=0;m<Y;m++)f(m);if(5===e||9===e)for(var x=function(e){var t="normal";5!==e&&9!==e&&1!==e&&13!==e||(t="tripleLetter");var a=Object(y.jsx)(E,{type:t,id:c+e,setRequestChoosePiece:l,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},p=0;p<Y;p++)x(p);if(6===e||8===e)for(var h=function(e){var t="normal";2!==e&&6!==e&&8!==e&&12!==e||(t="doubleLetter");var a=Object(y.jsx)(E,{type:t,id:c+e,setRequestChoosePiece:l,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},O=0;O<Y;O++)h(O);if(7===e)for(var v=function(e){var t="normal";7===e&&(t="startTile"),0!==e&&14!==e||(t="tripleWord"),3!==e&&11!==e||(t="doubleLetter");var a=Object(y.jsx)(E,{type:t,id:c+e,setRequestChoosePiece:l,ref:function(t){return r.current[c+e]=t}},c+e);n.push(a)},g=0;g<Y;g++)v(g);t.push(Object(y.jsxs)("div",{className:"flex border-opacity-100",children:[" ",n," "]},e))},I=0;I<Y;I++)k(I);var T=function(e){return r.current[e]},z=function(e){return T(e).removePiece()},L=function(e,t){return T(e).addPiece(t)},W=function(e,t){return"top"===e?t>=0&&t<15:"bottom"===e?t>209&&t<225:"left"===e?t%15===0:t%15===14},R=function(){var e,t,r,n=[],c=Object(o.a)(O.current);try{for(c.s();!(r=c.n()).done;){var a=r.value,s=T(a).getPiece(),l=G(a,"top"),u=G(a,"left"),d=G(a,"bottom"),b=G(a,"right");e=[].concat(Object(i.a)(l),[s],Object(i.a)(d)),t=[].concat(Object(i.a)(u),[s],Object(i.a)(b)),e.length>1&&n.push(e),t.length>1&&n.push(t)}}catch(j){c.e(j)}finally{c.f()}return n.filter((function(e,t,r){return r.findIndex((function(t){return JSON.stringify(t)===JSON.stringify(e)}))===t}))},G=function(e,t){var r,n,c=[];if(n="right"===t||"left"===t?1:15,W(t,e))return c;for(;;){var a=T(r="right"===t||"bottom"===t?e+n:e-n);if(!a.hasPiece())break;if("right"===t||"bottom"===t?c.push(a.getPiece()):c.unshift(a.getPiece()),n+="right"===t||"left"===t?1:15,W(t,r))break}return c};return Object(y.jsxs)("div",{className:"space-y-4 ",children:[Object(y.jsxs)("div",{style:{height:"fit-content"},className:"block border-8 border-black rounded-md",children:[" ",t," "]}),Object(y.jsx)(C,{}),Object(y.jsx)(S,{modalHandler:function(e){var t=Object(y.jsx)(P,{weight:0,char:e,onBoard:!0,isTransformed:!0,id:d.current.pieceID,tileID:d.current.tileID});L(d.current.tileID,t),g([].concat(Object(i.a)(O.current),[d.current.tileID])),c.emit("inPlayEvent",{roomID:j.current.roomID,pieceData:{weight:0,char:e,onBoard:!0,isTransformed:!0,id:d.current.pieceID,tileID:d.current.tileID}}),l({tileID:"",pieceID:"",status:!1})},mode:"chooseLetter",show:d.current.status})]})},q=r(118),B=r(119),J=function(e){var t,r,c=Object(n.useState)(1),a=Object(u.a)(c,2),s=a[0],i=a[1],l=Object(n.useState)("on"),o=Object(u.a)(l,2),d=o[0],b=o[1],j=Object(n.useState)(),f=Object(u.a)(j,2),m=f[0],x=f[1];Object(n.useEffect)((function(){var e=setInterval((function(){p()}),1e4);return x(e),function(){return clearInterval(m)}}),[]);var p=function(){var e=Object(W.a)(L.a.mark((function e(){var t,r,n,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,F({requestType:"get",url:"/ping",payload:{}});case 3:(r=e.sent)&&"pingSuccess"===r.status?(n=new Date,c=n.getTime()-t.getTime(),i(c),b(c<100?"on":c<500?"warning":"off")):b("off");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"on"===d?(r="Connection is good",t=Object(y.jsx)(q.a,{size:26,color:"#1fe03d"})):"off"===d?(r="Server disconnected. Trying to reconnect",t=Object(y.jsx)(B.a,{size:26,color:"#f32b0c"})):(t=Object(y.jsx)(q.a,{size:26,color:"#ffd100"}),r="Connection is poor. Delays may occur"),Object(y.jsx)("div",{className:"flex justify-end items-center",children:Object(y.jsxs)("div",{className:"flex space-x-1",children:[Object(y.jsx)("div",{title:r,className:"cursor-help flex-none",children:t}),Object(y.jsxs)("div",{title:"Server ping",className:"cursor-help flex-none text-gray-500",children:[s,"ms"]})]})})},M=r(120),U=r(121),V=function(){var e=A([]),t=Object(u.a)(e,3),r=(t[0],t[1]),c=t[2],a=Object(n.useContext)(x),s=a.player,i=a.players;return Object(n.useEffect)((function(){var e,t=[],n=Object(o.a)(i.current.entries());try{for(n.s();!(e=n.n()).done;){var c=Object(u.a)(e.value,2),a=c[0],l=c[1],d=Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{className:"text-left capitalize border ".concat(l.turn?"font-bold":""," border-gray-300 px-4 py-2 text-black-600 font-medium"),children:[l.name,Object(y.jsx)("span",{className:"inline pl-1",children:s.current.name===l.name?Object(y.jsxs)("span",{title:"This is You".concat(l.turn?". It's also your turn to play":""),children:[Object(y.jsx)(M.a,{title:"You",size:22,className:"inline pb-1",fill:"black",strokeWidth:1})," "]}):null}),Object(y.jsx)("span",{className:"inline",children:l.isSpeaking?Object(y.jsxs)("span",{title:"This person is currently recording",children:[" ",Object(y.jsx)(U.a,{size:22,className:"inline pb-1"})]}):null})]}),Object(y.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-black-600 font-medium",children:k(l.score)})]},a);t.push(d)}}catch(b){n.e(b)}finally{n.f()}r(t)}),[s.current,i.current]),Object(y.jsx)("div",{className:"flex justify-end",children:Object(y.jsxs)("table",{className:"table-auto w-80",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{className:"bg-gray-100",children:[Object(y.jsx)("th",{className:"text-left border border-gray-300 px-4 py-2 text-black-600",children:"Player"}),Object(y.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-black-600",children:"Score"})]})}),Object(y.jsx)("tbody",{children:c.current})]})})},K=r(122),_=r(123),Z=function(e){var t=Object(n.useContext)(O).notifications,r=A([]),c=Object(u.a)(r,3),a=(c[0],c[1]),s=c[2];return Object(n.useEffect)((function(){var e,r=Object(o.a)(t.current.entries());try{for(r.s();!(e=r.n()).done;){var n=Object(u.a)(e.value,2),c=n[0],s=n[1],i=void 0,l=void 0;"info"===s.type?(l=Object(y.jsx)(K.a,{size:22}),i="bg-blue-100 flex items-center border border-blue-300 text-blue-900 px-4 py-4 rounded relative"):"success"===s.type?(l=Object(y.jsx)(_.a,{size:22}),i="bg-green-100 flex items-center border border-green-300 text-green-800 px-4 py-4 rounded relative"):"error"===s.type?(l=Object(y.jsx)(K.a,{size:22}),i="bg-red-100 flex items-center border border-red-300 text-red-800 px-4 py-4 rounded relative"):"warning"===s.type?(l=Object(y.jsx)(K.a,{size:22}),i="bg-yellow-100 flex items-center border border-yellow-300 text-yellow-800 px-4 py-4 rounded relative"):(l=Object(y.jsx)(_.a,{size:22}),i="bg-center-100 flex items-center text-white center-500 text-center-800 px-4 py-4 rounded relative");var d=Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:i,children:[Object(y.jsx)("span",{className:"inline pr-4",children:l}),Object(y.jsx)("span",{className:"inline text-left",children:s.message})]}),Object(y.jsx)("div",{className:"pb-2"})]},c);a([d])}}catch(b){r.e(b)}finally{r.f()}}),[t.current]),s.current},$=r(135),Q=r(124),X=r(125);function ee(e){var t=Object(n.useRef)([]),r=A(!1),c=Object(u.a)(r,3),a=(c[0],c[1]),s=c[2];Object(n.useEffect)((function(){t.current=Array(e.pieces.length).fill().map((function(e,r){return t.current[r]}))}),[e.pieces.length]);var i=function(e){t.current.filter((function(e){return!0===e.checked})).length>0?a(!0):a(!1)};return e.show?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(y.jsx)("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:Object(y.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(y.jsxs)("div",{className:"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t",children:[Object(y.jsx)("h3",{className:"text-2xl font-semibold",children:"Exchange Pieces for a Turn"}),Object(y.jsx)("div",{className:"text-md pt-1 text-gray-500",children:"Use the checkboxes to select the pieces to swap"})]}),Object(y.jsxs)("div",{className:"relative flex flex-col p-10 pb-9 pt-8 flex justify-center flex-wrap",children:[Object(y.jsx)("div",{className:"flex justify-center block",children:e.pieces.map((function(e,r){return Object(y.jsxs)("div",{className:"mx-4 my-4 mt-2",children:[Object(y.jsx)(P,{isStatic:!0,char:e.piece,weight:e.weight}),Object(y.jsx)("div",{className:"self-center mt-1 text-xs text-gray-900",children:Object(y.jsx)("label",{className:"inline-flex items-center",children:Object(y.jsx)("input",{onChange:i,id:e.id,ref:function(e){return t.current[r]=e},type:"checkbox"})})})]},r)}))}),Object(y.jsxs)("div",{className:"my-4 mb-2 space-x-6 block",children:[Object(y.jsxs)("button",{onClick:function(){a(!1),e.swapCancelHandler()},className:"w-32 bg-red-600 hover:bg-red-700 text-white inline font-bold py-2 px-4 border border-red-700 rounded",children:[Object(y.jsx)(Q.a,{className:"inline",strokeWidth:3,size:22}),Object(y.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Cancel"})]}),s.current?Object(y.jsxs)("button",{onClick:function(){e.swapConfirmHandler(function(){var e,r=[],n=Object(o.a)(t.current);try{for(n.s();!(e=n.n()).done;){var c=e.value;!0===c.checked&&r.push(c.id)}}catch(a){n.e(a)}finally{n.f()}return r}())},className:"w-36 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 border border-green-700 rounded",children:[Object(y.jsx)(X.a,{className:"inline",strokeWidth:3,size:22}),Object(y.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Confirm"})]}):null]})]})]})})}),Object(y.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]}):null}var te=r(126),re=r(127),ne=r(128),ce=r(129),ae=r(130),se=r(131),ie={play:"Play as turn",shuffle:"Shuffle pieces on Rack",recall:"Recall played pieces",swap:"Swap pieces in place of turn",skip:"Skip turn",draw:"Start the game"},le=function(e){var t,r,n=e.type,c=e.size,a=e.handler;r="play"===n?"flex justify-center items-center hover:border-l-2 hover:border-green-600 bg-green-500 hover:bg-green-700 text-white font-bold w-12 h-12 border-green-600 hover:border-green-500":"draw"===n?"flex justify-center items-center hover:border-l-2 hover:border-yellow-300 bg-yellow-200 hover:bg-yellow-300 text-black font-normal px-10 w-12 h-12 border-2 border-yellow-300 hover:border-yellow-300":"flex justify-center items-center bg-blue-600 border-r-2 border-blue-700  hover:bg-blue-700 text-white font-bold w-12 h-12 border-blue-600 hover:border-blue-700","recall"===n?t=Object(y.jsx)(te.a,{strokeWidth:"2.5",size:c}):"play"===n?t=Object(y.jsx)(re.a,{fill:"white",strokeWidth:"2.5",size:c}):"shuffle"===n?t=Object(y.jsx)(ne.a,{strokeWidth:"2.5",size:c}):"swap"===n?t=Object(y.jsx)(ce.a,{strokeWidth:"2.5",size:c}):"skip"===n?t=Object(y.jsx)(ae.a,{strokeWidth:"2.5",size:c}):"draw"===n&&(t="Draw");"".concat(r),se.a;return Object(y.jsx)("button",{title:ie[n],className:"".concat(r),onClick:a,children:t})},oe=r(55),ue=r(132),de=r(133),be=function(){var e=Object(oe.useReactMediaRecorder)({audio:{type:"audio/ogg"},askPermissionOnMount:!0}),t=e.mediaBlobUrl,r=e.clearBlobUrl,c=e.stopRecording,a=e.startRecording,s=Object(n.useContext)(p),i=A(!0),d=Object(u.a)(i,3),b=(d[0],d[1]),j=d[2],f=A(null),m=Object(u.a)(f,3),h=(m[0],m[1]),O=m[2],v=A(""),g=Object(u.a)(v,3),w=(g[0],g[1]),N=g[2],k=Object(n.useContext)(x),D=k.player,I=k.setPlayer,C=k.players,P=k.setPlayers;return Object(n.useEffect)((function(){j.current?(c(),I(Object(l.a)(Object(l.a)({},D.current),{},{isSpeaking:!1}))):(r(),a(),c(),I(Object(l.a)(Object(l.a)({},D.current),{},{isSpeaking:!0}))),s.emit("radioEvent",{audioBlob:t,roomID:D.current.roomID,speakerName:D.current.name,isSpeaking:D.current.isSpeaking})}),[t,j.current]),Object(n.useEffect)((function(){s.on("audioTransmission",(function(e){var t,r=[],n=Object(o.a)(C.current);try{for(n.s();!(t=n.n()).done;){var c=t.value;e.speakerName===c.name&&(e.isSpeaking?c.isSpeaking=!0:c.isSpeaking=!1),r.push(c)}}catch(a){n.e(a)}finally{n.f()}h(null),P(r),h(e.audioBlob),w(e.speakerName)}))}),[]),Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{title:j.current?"Audio off. Click to record":"Audio is recording. Click to stop",onClick:function(){!1===j.current?b(!0):b(!1)},className:"flex justify-center items-center hover:border bg-yellow-200 hover:bg-yellow-300 text-white font-bold w-12 h-12 border border-yellow-400 hover:border-yellow-200",children:j.current?Object(y.jsx)(ue.a,{color:"black",strokeWidth:"2.5",size:20}):Object(y.jsx)(de.a,{color:"black",strokeWidth:"2.5",size:20})}),!D.current.isSpeaking&&O.current&&N.current!==D.current.name?Object(y.jsx)("audio",{className:"hidden",src:O.current,autoPlay:!0}):null]})},je=function(e){var t=Object(n.useContext)(x),r=t.player,c=t.gameStarted,a=t.allowAudio,s=A([]),i=Object(u.a)(s,3),l=(i[0],i[1]),d=i[2];return Object(n.useEffect)((function(){var t,n=[],a=Object(o.a)(["recall","shuffle","swap","skip","play"].entries());try{for(a.s();!(t=a.n()).done;){var s=Object(u.a)(t.value,2),i=s[0],d=s[1];n.push(Object(y.jsx)(le,{handler:e[d],type:d,size:20},i))}}catch(b){a.e(b)}finally{a.f()}r.current.isHost&&!c.current&&n.push(Object(y.jsx)(le,{handler:e.draw,type:"draw",size:20},6)),l(n)}),[c.current,r.current]),Object(y.jsxs)("div",{className:"flex items-center justify-center space-x-0 bg-blue-600",children:[a.current?Object(y.jsx)(be,{}):null,d.current]})},fe=r(134),me=function(e){var t,r=e.bag,n=A(!1),c=Object(u.a)(n,3),a=(c[0],c[1]),s=c[2];return Object(y.jsxs)("div",{title:"".concat(r.length," pieces remaining"),onClick:function(){return a(!s.current)},className:"flex items-end space-x-0",children:[Object(y.jsx)("div",{className:"flex-none",children:Object(y.jsx)(fe.a,{className:"cursor-pointer",fill:"gray",size:36})}),Object(y.jsx)("div",{className:"flex-none cursor-pointer text-gray-500 text-sm",children:(t=r.length,Object(y.jsx)(g.a,{start:t+7,end:t,duration:1.5}))}),Object(y.jsx)(S,{show:s.current})]})},xe=function(e){var t=Object(n.useRef)(),r=A(0),c=Object(u.a)(r,3),a=(c[0],c[1]),s=c[2],d=A([]),b=Object(u.a)(d,3),j=(b[0],b[1]),f=b[2],m=A(!1),v=Object(u.a)(m,3),g=(v[0],v[1]),w=v[2],N=A(""),k=Object(u.a)(N,3),D=(k[0],k[1]),C=k[2],T=A([]),E=Object(u.a)(T,3),S=(E[0],E[1]),z=E[2],R=Object(n.useContext)(p),G=Object(n.useContext)(h).setValidDrag,Y=Object(n.useContext)(O),H=Y.notifications,q=Y.setNotifications,B=Object(n.useContext)(x),J=B.player,M=B.setPlayer,U=B.bag,V=B.setPlayedWords,K=B.setPlayFlag,_=B.gameStarted,Z=B.timeToPlay,Q=B.playedTiles,X=B.playedWords,te=B.usedTiles,re=B.gameEnded,ne=B.setRecallFlag,ce=A(Z.current),ae=Object(u.a)(ce,3),se=(ae[0],ae[1]),ie=ae[2];Object(n.useEffect)((function(){function e(){return(e=Object(W.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==f.current.length){e.next=6;break}return e.t0=j,e.next=4,de(7);case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)(Object(W.a)(L.a.mark((function e(){var t,r,n,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!re.current){e.next=8;break}t=J.current.score,r=Object(o.a)(f.current);try{for(r.s();!(n=r.n()).done;)c=n.value,t-=c.weight}catch(a){r.e(a)}finally{r.f()}return e.next=6,F({requestType:"post",url:"/scores",payload:{score:t,name:J.current.name,roomID:J.current.roomID}});case 6:"success"===e.sent.status&&M(Object(l.a)(Object(l.a)({},J.current),{},{turn:!1}));case 8:case"end":return e.stop()}}),e)}))),[re.current]),Object(n.useEffect)(Object(W.a)(L.a.mark((function e(){var t,r,n,c,i,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(X.current.length>0)){e.next=25;break}if(!(s.current>=3)){e.next=5;break}return we(),a(0),e.abrupt("return");case 5:return t=X.current.map((function(e){return e.map((function(e){return e.char})).join("")})),e.next=8,ue(t);case 8:if("error"!==(r=e.sent).status){e.next=14;break}a(s.current+1),q([{type:"error",message:r.message}]),e.next=25;break;case 14:return n=0===U.current.length,c=0===f.current.length,i=le(t,z.current),l=oe(X.current,7===z.current.length),e.next=20,be(z.current.length);case 20:S([]),R.emit("playEvent",{score:l,word:i,bagIsEmpty:n,rackIsEmpty:c,name:J.current.name,roomID:J.current.roomID}),clearInterval(C.current),V([]),a(0);case 25:case"end":return e.stop()}}),e)}))),[X.current]),Object(n.useEffect)((function(){if(se(Z.current),Z.current&&J.current.turn){var e=setInterval((function(){0===ie.current?we():se(ie.current-1)}),1e3);return D(e),function(){return clearInterval(C.current)}}}),[J.current.turn]);var le=function(e,t){var r,n,c=0,a=Object(o.a)(e);try{for(a.s();!(n=a.n()).done;){var s,i=n.value,l=0,u=Object(o.a)(t);try{for(u.s();!(s=u.n()).done;){var d=s.value;i.includes(d.piece)&&(l+=1)}}catch(b){u.e(b)}finally{u.f()}l>c&&(r=i,c=l)}}catch(b){a.e(b)}finally{a.f()}return r},oe=function(e,t){var r,n=0,c=Object(o.a)(e);try{for(c.s();!(r=c.n()).done;){var a,s=r.value,i=0,l=1,u=Object(o.a)(s);try{for(u.s();!(a=u.n()).done;){var d=a.value,b=0,j=d.tileID,f=d.tileType;te.current.includes(j)?b=d.weight:"doubleLetter"===f?b=2*d.weight:"doubleWord"===f||"startTile"===f?(l*=2,b=d.weight):"tripleWord"===f?(l*=3,b=d.weight):b="tripleLetter"===f?3*d.weight:d.weight,i+=b}}catch(m){u.e(m)}finally{u.f()}n+=i*=l}}catch(m){c.e(m)}finally{c.f()}return n=t?n+50:n},ue=function(){var e=Object(W.a)(L.a.mark((function e(t){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({url:"/validate",requestType:"post",payload:{words:t}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(W.a)(L.a.mark((function e(t){var r,n,c,a,s,i,l;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({payload:{},requestType:"get",url:"/bag/".concat(t,"?roomID=").concat(J.current.roomID)});case 2:for(r=e.sent,n=r.pieces,c=0,a=Object.entries(n);c<a.length;c++)s=Object(u.a)(a[c],2),i=s[0],(l=s[1]).id="".concat(i,"_").concat(l.id);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(W.a)(L.a.mark((function e(t){var r,n,c,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t);case 2:r=e.sent,n=Object(o.a)(r);try{for(n.s();!(c=n.n()).done;)a=c.value,Ne(a)}catch(s){n.e(s)}finally{n.f()}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){var t=De(e,f.current);xe(t),Ie(t)},xe=function(e){var t=f.current.filter((function(t){return t.id!==e.id}));j(Object(i.a)(t))},pe=function(e){return e+=1,Math.ceil(e/15)},he=function(){var e=Object(W.a)(L.a.mark((function e(t){var r,n,c,a,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=9;break}r=[],n=Object(o.a)(t);try{for(n.s();!(c=n.n()).done;)a=c.value,s=ke(a,f.current),xe(s),r.push(s)}catch(i){n.e(i)}finally{n.f()}return clearInterval(C.current),g(!1),e.next=8,be(t.length);case 8:R.emit("playEvent",{piecesSwapped:r,isTurnSwapped:!0,name:J.current.name,roomID:J.current.roomID});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e,t,r){var n,c=!0,a=0,s=function(e,t,r){for(var n=[],c=[],a="horizontal"===t?pe(e):function(e){return(e+=1)%15}(e),s="horizontal"===t?1:15,i="horizontal"===t?15*(a-1):a-1,l=0;l<15;l++)r.includes(i)&&n.push(i),c.push(i),i+=s;var o=c.indexOf(n[0]),u=c.indexOf(n[n.length-1]);return c.slice(o,u+1)}(e[e.length-1],r,e),i=Object(o.a)(s);try{for(i.s();!(n=i.n()).done;){var l=n.value;if(!te.current.includes(l)&&!e.includes(l))return c=!1}}catch(h){i.e(h)}finally{i.f()}var u,d=Object(o.a)(e);try{for(d.s();!(u=d.n()).done;){var b,j,f,m,x=u.value,p=[];f=x-1,j=x+15,m=x+1,(b=x-15)>=0&&p.push(b),f>=0&&p.push(f),j<=224&&p.push(j),m<=224&&p.push(m),p.forEach((function(e){!t&&te.current.includes(e)&&(a+=1)}))}}catch(h){d.e(h)}finally{d.f()}return!t&&a<1&&(c=!1),c},ve=function(e,t){var r=function(e){var t,r=(e=e.sort((function(e,t){return e-t})))[0],n=pe(r),c=e.length;if(e.every((function(e){return pe(e)===n})))t="horizontal";else for(var a=0;a<c;a++)if(a+1<c){var s=e[a];if((e[a+1]-s)%15!==0){t="both";break}t="vertical"}return t}(e),n=Oe(e,t,r);"both"!==r&&n?K(!0):q([{type:"error",message:"Sorry, that's an invalid move"}])},ge=function(){re.current?q([{type:"info",message:"The game has ended. No more actions are possible."}]):J.current.turn&&_.current?(j([].concat(Object(i.a)(f.current),Object(i.a)(z.current))),S([]),ne(!0),R.emit("recallEvent",{roomID:J.current.roomID,name:J.current.name})):q([].concat(Object(i.a)(H.current),[{message:"You can not recall pieces until it's your turn to play. Kindly wait your turn",overwrite:!1,type:"warning",timeout:5}]))},ye=function(){return 0===te.current.length},we=function(){ge(),R.emit("playEvent",{isTurnSkipped:!0,name:J.current.name,roomID:J.current.roomID}),clearInterval(C.current)},Ne=function(e){return j([].concat(Object(i.a)(f.current),[e]))},ke=function(e,t){return t.find((function(t){return t.id===e}))},De=function(e,t){return t.find((function(t){return t.id===e.id}))},Ie=function(e){return S([].concat(Object(i.a)(z.current),[e]))},Ce=function(e){if(J.current.turn){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=I(e);if(!te.current.includes(t.tileID)){var r=De(t,z.current);R.emit("inPlayEvent",{roomID:J.current.roomID,pieceData:Object(l.a)(Object(l.a)({},t),{},{toRackMove:!0})}),t.onBoard?(!function(e){var t=Object(i.a)(z.current).filter((function(t){return t.id!==e.id}));S(Object(i.a)(t))}(r),Ne(r)):G(!1)}}},Pe=function(e){return e.preventDefault()},Te=function(e){return e.preventDefault()},Ee=function(e){return e.preventDefault()};Object(n.useEffect)((function(){return t.current.addEventListener("drop",Ce)})),Object(n.useEffect)((function(){return t.current.addEventListener("dragover",Pe)})),Object(n.useEffect)((function(){return t.current.addEventListener("dragleave",Ee)})),Object(n.useEffect)((function(){return t.current.addEventListener("dragenter",Te)}));var Se,ze=_.current?"flex justify-between items-end":"flex justify-end items-end";return Object(y.jsxs)("div",{className:"block",children:[Object(y.jsx)("div",{ref:t,className:"flex justify-end",children:Object(y.jsx)("div",{style:{width:"25rem"},className:"h-16 flex border-4 bg-gray-300 border-gray-500 rounded-md",children:f.current?f.current.map((function(e,t){if(e)return Object(y.jsx)(P,{id:e.id,onBoard:!1,char:e.piece,weight:e.weight,dragEndHandler:fe},"".concat(e.id,"_").concat(t))})):null})}),Object(y.jsx)("div",{className:"py-2"}),Object(y.jsxs)("div",{className:ze,children:[_.current?Object(y.jsx)(me,{bag:U.current}):null,Object(y.jsx)(je,{gameStarted:_,shuffle:function(){return j(Object(i.a)(function(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}(f.current)))},recall:ge,skip:function(){re.current?q([{type:"info",message:"The game has ended. No more actions are possible."}]):J.current.turn&&_.current?window.confirm("Are you sure you want to skip your turn?")&&we():q([].concat(Object(i.a)(H.current),[{message:"You can not skip turn until it is your turn to play. Kindly wait your turn",overwrite:!1,type:"warning",timeout:5}]))},play:function(){if(re.current)q([{type:"info",message:"The game has ended. No more actions are possible."}]);else if(J.current.turn&&_.current)if(0===z.current.length)q([{type:"warning",message:"You haven't played anything. You can alternatively skip your turn"}]);else{var e=ye();if(e&&!Q.current.includes(112))return void q([{type:"error",message:"Invalid start move. You must play on the starred tile"}]);ve(Q.current,e)}},draw:function(){return R.emit("drawEvent",{roomID:J.current.roomID})},swap:function(){re.current?q([{type:"info",message:"The game has ended. No more actions are possible."}]):J.current.turn&&_.current?U.current.length<=7?q([{message:"Swapping pieces is no longer possible, as the bag has ".concat(U.current.length," pieces left. "),type:"info"}]):(ge(),g(!0)):q([{message:"You can not swap pieces until it is your turn to play. Kindly wait your turn",overwrite:!1,type:"warning",timeout:5}])}})]}),Object(y.jsx)("div",{className:"py-2"}),J.current.turn&&Z.current?Object(y.jsxs)("div",{title:"Time left to play",className:"".concat(ie.current<10?"blink":""," cursor-help flex text-gray-400 justify-end items-center"),children:[Object(y.jsx)($.a,{size:19,className:"inline"}),Object(y.jsx)("span",{className:"pl-1",children:(Se=ie.current,new Date(1e3*Se).toISOString().substr(14,5))})]}):null,Object(y.jsx)(ee,{show:w.current,pieces:f.current,swapCancelHandler:function(){return g(!1)},swapConfirmHandler:he})]})},pe=r(136),he=r(137);function Oe(e){var t=e.logs,r=e.close,n=e.show,c=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{onClick:function(){return r()},className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(y.jsx)("div",{className:"relative w-screen my-6 mx-auto max-w-3xl",children:Object(y.jsxs)("div",{className:"h-96 border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(y.jsxs)("div",{className:"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t",children:[Object(y.jsx)("h3",{className:"text-2xl font-semibold",children:"Logs"}),Object(y.jsx)("div",{className:"text-md pt-1 text-gray-500",children:"History of in-game plays"})]}),Object(y.jsx)("div",{className:"overflow-auto py-0 justify-center",children:t.length>0?Object(y.jsxs)("table",{className:"table-auto w-full mb-5",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{className:"bg-gray-100",children:[Object(y.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-black-600",children:"Time"}),Object(y.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-black-600",children:"Event"})]})}),Object(y.jsx)("tbody",{children:t.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"w-1/5 text-gray-500 capitalize border border-gray-300 px-4 py-2 text-black-600 font-medium",children:e.time}),Object(y.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-black-600 font-medium",children:e.event})]},t)}))})]}):Object(y.jsx)("div",{className:"flex pt-28 text-gray-500 justify-center",children:"Nothing to show :)"})})]})})}),Object(y.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]});return n.current?c:null}var ve=function(e){var t=A(!1),r=Object(u.a)(t,3),c=(r[0],r[1]),a=r[2],s=A([]),l=Object(u.a)(s,3),o=(l[0],l[1]),d=l[2],b=Object(n.useContext)(x).player;return Object(n.useEffect)(Object(W.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=5;break}return e.next=3,F({requestType:"get",url:"/logs/".concat(b.current.roomID)});case 3:"success"===(t=e.sent).status&&o(Object(i.a)(t.logs));case 5:case"end":return e.stop()}}),e)}))),[a.current]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"flex justify-between items-center",children:[Object(y.jsxs)("div",{onClick:function(){return c(!0)},className:"cursor-pointer flex justify-end items-end space-x-1 text-gray-500",children:[Object(y.jsx)("div",{className:"flex-none",children:Object(y.jsx)(pe.a,{size:22})}),Object(y.jsx)("div",{className:"flex-none text-sm",children:"Game Logs"})]}),Object(y.jsx)("div",{className:"flex justify-end items-end space-x-1",children:Object(y.jsxs)("div",{className:"font-bold pt-2 text-sm text-gray-500",children:[Object(y.jsx)(he.a,{size:22,className:"inline pb-1 pr-1"}),b.current.roomID]})})]}),Object(y.jsx)(Oe,{logs:d.current,close:function(){return c(!1)},show:a})]})},ge=function(e){return Object(y.jsxs)("div",{className:"flex flex-col pt-4 pb-10 justify-around w-450",children:[Object(y.jsx)("div",{className:"block",children:Object(y.jsx)(Z,{})}),Object(y.jsx)("div",{className:"block py-8",children:Object(y.jsx)(J,{status:"off"})}),Object(y.jsx)("div",{className:"block py-8",children:Object(y.jsx)(V,{})}),Object(y.jsx)("div",{className:"block py-8",children:Object(y.jsx)("div",{className:"flex justify-end",children:Object(y.jsx)(xe,{})})}),Object(y.jsx)("div",{className:"block",children:Object(y.jsx)("div",{className:"pt-1",children:Object(y.jsx)(ve,{})})})]})},ye=r(138),we=r(139),Ne=function(e){return Object(y.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[Object(y.jsxs)("div",{className:"block flex justify-center text-gray-800 text-bold text-3xl space-x-2",children:[Object(y.jsx)("div",{className:"text-4xl",children:"Scrabble"}),Object(y.jsx)("div",{className:"bg-yellow-200 px-2 font-normal rounded-md text-black self-center text-sm border",children:"v2.4"})]}),Object(y.jsxs)("div",{className:"flex my-6 mb-2 space-x-6 block justify-center",children:[Object(y.jsxs)("button",{title:"Create a new game session",onClick:function(){return e.setGameChoice("new")},className:"h-12 w-36 bg-green-600 hover:bg-green-700 text-white font-bold px-4 border border-green-700 rounded inline-flex justify-center items-center",children:[Object(y.jsx)(ye.a,{strokeWidth:3,size:26}),Object(y.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Host"})]}),Object(y.jsxs)("button",{onClick:function(){return e.setGameChoice("join")},className:"h-12 w-36 bg-blue-600 hover:bg-blue-700 text-white font-bold px-4 border border-blue-700 rounded inline-flex justify-center items-center",children:[Object(y.jsx)(we.a,{strokeWidth:3,size:26}),Object(y.jsx)("span",{title:"Join a game session",className:"pl-1 pr-2 text-md",children:"Join"})]})]}),Object(y.jsx)("div",{className:"flex my-4 mb-2 space-x-6 block justify-center",children:Object(y.jsxs)("div",{className:"text-gray-400",children:["Familiarize yourself with the ",Object(y.jsx)("a",{className:"text-blue-500",href:"#",children:"Game Notes"})," before you begin"]})})]})},ke=function(e){return Object(y.jsx)("div",{children:"Not Implemented"})},De=r(140),Ie=r(141),Ce=function(e){var t=Object(n.useContext)(p),r=Object(n.useContext)(O).setNotifications,c=A([]),a=Object(u.a)(c,3),s=(a[0],a[1]),i=a[2],l=A("Preparing game room..."),o=Object(u.a)(l,3),d=(o[0],o[1]),b=o[2],j=Object(n.useContext)(x),f=j.player,m=j.setGameCreated,h=j.setAllowAudio,v=j.setPlayers,g=j.setTimeToPlay;return Object(n.useEffect)((function(){s([f.current]),t.on("joinedRoom",(function(r){g(r.timeToPlay),h(r.enableAudio),s(r.connectedPlayers),r.player.name!==f.current.name&&i.current.length===e.numPlayers&&f.current.isHost&&t.emit("gameCreateEvent",{roomID:e.roomID})})),t.on("gameCreate",(function(e){var t=f.current.isHost?"Make a draw using the yellow button on your button rack. You'll":"The host will make a draw, and you'll";r([{message:"Welcome, ".concat(f.current.name,"! ").concat(t," be notified (just like this) of who gets to play first. Good luck! \ud83c\udf40"),overwrite:!1,type:"success"}]),v(e.allPlayers),setTimeout((function(){d("Populating rack...")}),1500),setTimeout((function(){m(!0)}),3500)}),[])}),[]),Object(y.jsx)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:Object(y.jsxs)("div",{className:"max-w-sm pt-4 w-96 rounded overflow-hidden shadow-2xl",children:[Object(y.jsxs)("div",{className:"px-8 flex justify-between items-center w-full py-4",children:[Object(y.jsx)("div",{className:"font-bold text-left text-2xl",children:"Waiting Room"}),Object(y.jsxs)("div",{title:"Share this ID with players you want to join your game session",className:"cursor-help font-bold pt-2 text-sm text-gray-400",children:[Object(y.jsx)(he.a,{size:23,className:"inline pb-1 pr-1"}),e.roomID]})]}),Object(y.jsxs)("div",{className:"py-8 px-6 border-t border",children:[Object(y.jsx)(De.a,{size:22,className:"inline"})," Connected players: ",k(i.current.length),"/",Object(y.jsx)("span",{className:"font-bold",children:e.numPlayers})]}),i.current.length===e.numPlayers?Object(y.jsx)("div",{className:"py-4 border-t border",children:Object(y.jsx)("div",{className:"text-sm italic text-gray-500",children:b.current})}):null,Object(y.jsx)("div",{className:"py-4 border-t border",children:i.current.map((function(e,t){return Object(y.jsxs)("div",{className:"text-sm text-gray-500",children:[e.name===f.current.name?"You (".concat(e.name,")"):e.name," joined the game room"]},t)}))}),f.current.isHost?Object(y.jsx)("div",{className:"h-14 border-t border",children:Object(y.jsxs)("button",{onClick:e.handleDestroyGameSession,className:"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center",children:[Object(y.jsx)(Ie.a,{size:22}),Object(y.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Delete Session"})]})}):null]})})},Pe=function(e){var t=Object(n.useState)(0),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(!1),i=Object(u.a)(s,2),o=i[0],d=i[1],b=Object(n.useState)({valid:!0,message:"",roomID:""}),j=Object(u.a)(b,2),f=j[0],m=j[1],h=Object(n.useState)({valid:!0,message:"",name:""}),O=Object(u.a)(h,2),v=O[0],g=O[1],w=Object(n.useContext)(p),k=Object(n.useContext)(x).setPlayer,D=function(){var e=Object(W.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({requestType:"get",url:"/room/".concat(t,"?name=").concat(v.name),payload:{}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(W.a)(L.a.mark((function e(){var t,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v.name.length<2||v.name.length>10)){e.next=3;break}return g(Object(l.a)(Object(l.a)({},v),{},{valid:!1,message:"Name must be between 2 and 10 characters"})),e.abrupt("return");case 3:if(N(v.name)){e.next=6;break}return g(Object(l.a)(Object(l.a)({},v),{},{valid:!1,message:"Name must be alphanumeric"})),e.abrupt("return");case 6:if(!(f.roomID.length<11)){e.next=9;break}return m(Object(l.a)(Object(l.a)({},f),{},{valid:!1,message:"Session ID must be 11 characters"})),e.abrupt("return");case 9:return e.next=11,D(f.roomID);case 11:"error"===(t=e.sent).status?m(Object(l.a)(Object(l.a)({},f),{},{valid:!1,message:t.message})):"nameError"===t.status?g(Object(l.a)(Object(l.a)({},v),{},{valid:!1,message:t.message})):t.room.joinable?(r={score:0,turn:!1,isHost:!1,isSpeaking:!1,roomID:f.roomID,name:v.name.capitalize()},w.emit("join",{roomID:f.roomID,player:r}),a(t.room.limit),k(r),d(!0)):m({valid:!1,message:"Game session has started and cannot be joined"});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C="".concat(v.valid?"mb-4":"mb-0"," w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500");return o?Object(y.jsx)(Ce,{roomID:f.roomID,numPlayers:c}):Object(y.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[Object(y.jsx)("div",{className:"font-medium text-xl pb-3",children:"Join a Game Session"}),Object(y.jsxs)("div",{className:"justify-center flex flex-col pt-4 w-96 rounded overflow-hidden shadow-2xl",children:[Object(y.jsx)("div",{className:"flex self-center pt-6 mx-3 mb-1",children:Object(y.jsxs)("div",{className:"px-3",children:[Object(y.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-1",children:"Your Name"}),Object(y.jsx)("input",{minLength:3,maxLength:10,onChange:function(e){g(Object(l.a)(Object(l.a)({},v),{},{valid:!0,name:e.target.value.trim()}))},title:"Your name",className:C,type:"text",placeholder:"E.g. Joey"})]})}),Object(y.jsx)("div",{className:"flex self-center wrap mx-3",children:v.valid?null:Object(y.jsx)("div",{className:"w-full px-3",children:Object(y.jsx)("div",{className:"w-80 md:flex md:items-center",children:Object(y.jsx)("span",{className:"text-sm text-red-600 mb-4",children:v.message})})})}),Object(y.jsx)("div",{className:"flex self-center mx-3 mb-0",children:Object(y.jsxs)("div",{className:"px-3",children:[Object(y.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Session ID"}),Object(y.jsx)("input",{onChange:function(e){m(Object(l.a)(Object(l.a)({},f),{},{valid:!0,roomID:e.target.value.trim()}))},maxLength:11,className:"w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-1 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",placeholder:"E.g. 41828-11860"})]})}),Object(y.jsx)("div",{className:"flex self-center wrap mx-3 mb-6",children:f.valid?null:Object(y.jsx)("div",{className:"w-full px-3",children:Object(y.jsx)("div",{className:"w-80  md:flex md:items-center",children:Object(y.jsx)("span",{className:"text-sm text-red-600 pb-2",children:f.message})})})}),Object(y.jsxs)("div",{className:"h-14 border-t flex border",children:[Object(y.jsx)("div",{className:"block w-1/2",children:Object(y.jsxs)("button",{onClick:function(){return e.setGameChoice("cancel")},className:"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center",children:[Object(y.jsx)(Q.a,{size:26}),Object(y.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Cancel"})]})}),Object(y.jsx)("div",{className:"block w-1/2",children:Object(y.jsxs)("button",{onClick:I,className:"h-full w-full bg-green-600 hover:bg-green-700 text-white font-bold border border-green-700 inline-flex justify-center items-center",children:[Object(y.jsx)(we.a,{className:"pb",strokeWidth:3,size:26}),Object(y.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Join"})]})})]})]})]})},Te=r(142),Ee="".concat(w(5),"-").concat(w(5)),Se=function(e){var t=Object(n.useState)(2),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(null),i=Object(u.a)(s,2),o=i[0],d=i[1],b=Object(n.useState)(!1),j=Object(u.a)(b,2),f=j[0],m=j[1],h=Object(n.useState)(!1),O=Object(u.a)(h,2),v=O[0],g=O[1],k=Object(n.useState)({valid:!0,message:"",name:""}),D=Object(u.a)(k,2),I=D[0],C=D[1],P=Object(n.useContext)(p),T=Object(n.useContext)(x).setPlayer,E="".concat(I.valid?"mb-4":"mb-0"," w-80 appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500");return f?Object(y.jsx)(Ce,{roomID:Ee,numPlayers:c,handleDestroyGameSession:function(){window.confirm("Are you sure you want to delete this game session?")&&(a(2),g(!1),m(!1),e.setGameChoice("cancel"),C({message:"",valid:!0,name:""}),P.emit("leave",{roomID:Ee}),Ee="".concat(w(5),"-").concat(w(5)))}}):Object(y.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[Object(y.jsx)("div",{className:"font-medium text-xl pb-3",children:"Host a Game Session"}),Object(y.jsxs)("div",{className:"justify-center flex flex-col pt-4 w-96 rounded overflow-hidden shadow-2xl",children:[Object(y.jsx)("div",{className:"flex self-center pt-6 mx-3 mb-2",children:Object(y.jsxs)("div",{className:"px-3",children:[Object(y.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Your Session ID"}),Object(y.jsx)("input",{title:"Automatically-generated session ID",disabled:!0,value:Ee,className:"w-80 cursor-not-allowed appearance-none block bg-gray-100 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",type:"text",placeholder:"E.g. Joey"})]})}),Object(y.jsx)("div",{className:"flex self-center mx-3 mb-1",children:Object(y.jsxs)("div",{className:"px-3",children:[Object(y.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-1",children:"Your Name"}),Object(y.jsx)("input",{minLength:3,maxLength:10,onChange:function(e){C(Object(l.a)(Object(l.a)({},I),{},{valid:!0,name:e.target.value.trim()}))},title:"Your name",className:E,type:"text",placeholder:"E.g. Phoebe"})]})}),Object(y.jsx)("div",{className:"flex self-center wrap mx-3",children:I.valid?null:Object(y.jsx)("div",{className:"w-full px-3",children:Object(y.jsx)("div",{className:"w-80 md:flex md:items-center",children:Object(y.jsx)("span",{className:"text-sm text-red-600 mb-4",children:I.message})})})}),Object(y.jsx)("div",{className:"flex self-center flex-wrap -mx-3 mt-1 mb-4",children:Object(y.jsxs)("div",{className:"w-full px-3",children:[Object(y.jsx)("label",{className:"block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Number of Players"}),Object(y.jsxs)("div",{className:"relative",children:[Object(y.jsxs)("select",{onChange:function(e){a(parseInt(e.target.value))},className:"block cursor-pointer appearance-none w-80 bg-gray-100 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[Object(y.jsx)("option",{defaultValue:!0,value:2,children:"Two"}),Object(y.jsx)("option",{value:3,children:"Three"}),Object(y.jsx)("option",{value:4,children:"Four"})]}),Object(y.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:Object(y.jsx)(Te.a,{size:20})})]})]})}),Object(y.jsx)("div",{className:"flex self-center flex-wrap -mx-3 mt-1 mb-6",children:Object(y.jsxs)("div",{className:"w-full px-3",children:[Object(y.jsx)("label",{title:"Required time to play before turn is automatically skipped",className:"cursor-help block uppercase text-left tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Time to Play"}),Object(y.jsxs)("div",{className:"relative",children:[Object(y.jsxs)("select",{onChange:function(e){"Disabled"!==e.target.value?d(parseInt(e.target.value)):d(null)},className:"block cursor-pointer appearance-none w-80 bg-gray-100 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",children:[Object(y.jsx)("option",{defaultValue:!0,value:null,children:"Disabled"}),Object(y.jsx)("option",{value:300,children:"Five minutes"}),Object(y.jsx)("option",{value:240,children:"Four minutes"}),Object(y.jsx)("option",{value:180,children:"Three minutes"}),Object(y.jsx)("option",{value:120,children:"Two minutes"}),Object(y.jsx)("option",{value:60,children:"One minute"})]}),Object(y.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:Object(y.jsx)(Te.a,{size:20})})]})]})}),Object(y.jsx)("div",{className:"flex self-center wrap mx-3 mb-4",children:Object(y.jsx)("div",{className:"w-full px-3",children:Object(y.jsxs)("div",{title:"If checked, push-to-talk audio between players will be allowed. That is, of course, if the player allows it",className:"w-80 cursor-help md:flex md:items-center mb-2",children:[Object(y.jsx)("label",{className:"pb-1 block text-gray-500 font-bold",children:Object(y.jsx)("input",{onChange:function(e){g(e.target.checked)},className:"mr-2 leading-tight h-5 w-5",type:"checkbox"})}),Object(y.jsx)("span",{className:"text-sm pb-2",children:"Enable Audio Chat (Push-To-Talk)"})]})})}),Object(y.jsxs)("div",{className:"h-14 border-t flex border",children:[Object(y.jsx)("div",{className:"block w-1/2",children:Object(y.jsxs)("button",{onClick:function(){return e.setGameChoice("cancel")},className:"h-full w-full bg-red-600 hover:bg-red-700 text-white font-bold border border-red-700 inline-flex justify-center items-center",children:[Object(y.jsx)(Q.a,{size:26}),Object(y.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Cancel"})]})}),Object(y.jsx)("div",{className:"block w-1/2",children:Object(y.jsxs)("button",{onClick:function(){if(I.name.length<2||I.name.length>10)C(Object(l.a)(Object(l.a)({},I),{},{valid:!1,message:"Name must be between 2 and 10 characters"}));else if(N(I.name)){var e={roomID:Ee,score:0,turn:!1,isHost:!0,isSpeaking:!1,name:I.name.capitalize()};P.emit("join",{roomID:Ee,enableAudio:v,timeToPlay:o,player:e,limit:c}),T(e),m(!0)}else C(Object(l.a)(Object(l.a)({},I),{},{valid:!1,message:"Name must be alphanumeric"}))},className:"h-full w-full bg-green-600 hover:bg-green-700 text-white font-bold border border-green-700 inline-flex justify-center items-center",children:[Object(y.jsx)(ye.a,{className:"pb",strokeWidth:3,size:26}),Object(y.jsx)("span",{className:"pl-1 pr-2 text-md",children:"Host"})]})})]})]})]})},ze=function(e){var t=Object(n.useState)(!1),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(!1),i=Object(u.a)(s,2),l=i[0],o=i[1],d=Object(n.useState)(!1),b=Object(u.a)(d,2),j=b[0],f=b[1],m=function(e){"new"===e?(a(!0),o(!1),f(!1)):"join"===e?(o(!0),a(!1),f(!1)):"resume"===e?(a(!1),o(!1),f(!0)):(a(!1),o(!1),f(!1))};return c?Object(y.jsx)(Se,{setGameChoice:m}):l?Object(y.jsx)(Pe,{setGameChoice:m}):j?Object(y.jsx)(ke,{setGameChoice:m}):Object(y.jsx)(Ne,{setGameChoice:m})},Le=r(143);function We(e){var t=A(!1),r=Object(u.a)(t,3),c=(r[0],r[1]),a=r[2],s=Object(n.useState)(""),i=Object(u.a)(s,2),l=i[0],d=i[1],b=Object(n.useContext)(p),j=Object(n.useContext)(x),f=j.player,m=j.setPlayers;Object(n.useEffect)((function(){b.on("gameEnd",(function(e){var t,r,n={name:"",score:0},a=Object(o.a)(e);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.score>n.score&&(n.name=s.name,n.score=s.score)}}catch(b){a.e(b)}finally{a.f()}t=f.current.name===n.name?"Congratulations, ".concat(n.name,"! You are the winner with ").concat(n.score," points. You've earned the trophy!"):"".concat(n.name," is the winner with ").concat(n.score," points. Good game, ").concat(f.current.name,". You still earn a medal \ud83c\udfc5");var i,l=Object(o.a)(e);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.name===n.name?u.name="".concat(u.name," \ud83c\udfc6"):u.name="".concat(u.name," \ud83c\udfc5")}}catch(b){l.e(b)}finally{l.f()}d(t),m(e),c(!0)}))}),[]);var h=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(y.jsx)("div",{className:"relative w-screen my-6 mx-auto max-w-3xl",children:Object(y.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(y.jsx)("div",{className:"flex justify-center flex-col pt-7 p-3 border-b border-solid border-blueGray-200 rounded-t",children:Object(y.jsx)("h3",{className:"text-2xl font-semibold",children:"\ud83c\udfc6 The Game Has Ended \ud83c\udfc6"})}),Object(y.jsxs)("div",{className:"flex-col relative text-lg pt-5 pb-7 flex justify-center flex-wrap",children:[Object(y.jsx)("div",{className:"pb-6",children:l}),Object(y.jsxs)("button",{onClick:function(){c(!1)},className:"self-center bg-green-600 hover:bg-green-700 text-white inline py-2 px-4 border border-green-700 rounded",children:[Object(y.jsx)(Le.a,{className:"inline pb-1",strokeWidth:2,size:24}),Object(y.jsx)("span",{className:"pl-1",children:"Cool, Thanks"})]})]})]})})}),Object(y.jsx)("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]});return a.current?h:null}var Re=function(){var e=A(!1),t=Object(u.a)(e,3),r=(t[0],t[1]),c=t[2],a=A(!1),s=Object(u.a)(a,3),d=(s[0],s[1]),b=s[2],j=A(!1),f=Object(u.a)(j,3),m=(f[0],f[1]),v=f[2],g=A(!1),w=Object(u.a)(g,3),N=(w[0],w[1]),k=w[2],D=A(!1),I=Object(u.a)(D,3),C=(I[0],I[1]),P=I[2],T=A(!1),E=Object(u.a)(T,3),S=(E[0],E[1]),z=E[2],L=A(null),W=Object(u.a)(L,3),R=(W[0],W[1]),G=W[2],F=A([]),Y=Object(u.a)(F,3),q=(Y[0],Y[1]),B=Y[2],J=A([]),M=Object(u.a)(J,3),U=(M[0],M[1]),V=M[2],K=A([]),_=Object(u.a)(K,3),Z=(_[0],_[1]),$=_[2],Q=A(!0),X=Object(u.a)(Q,3),ee=(X[0],X[1]),te=X[2],re=A([]),ne=Object(u.a)(re,3),ce=(ne[0],ne[1]),ae=ne[2],se=A({}),ie=Object(u.a)(se,3),le=(ie[0],ie[1]),oe=ie[2],ue=A({length:0,pieces:{}}),de=Object(u.a)(ue,3),be=(de[0],de[1]),je=de[2],fe=A([]),me=Object(u.a)(fe,3),xe=(me[0],me[1]),pe=me[2],he=Object(n.useContext)(p),Oe={bag:je,setBag:be,player:oe,setPlayer:le,players:ae,setPlayers:ce,playFlag:k,setPlayFlag:N,gameEnded:c,setGameEnded:r,usedTiles:$,setUsedTiles:Z,allowAudio:z,setAllowAudio:S,recallFlag:P,setRecallFlag:C,timeToPlay:G,setTimeToPlay:R,gameStarted:v,setGameStarted:m,gameCreated:b,setGameCreated:d,playedTiles:B,setPlayedTiles:q,playedWords:V,setPlayedWords:U};Object(n.useEffect)((function(){he.on("drawDone",(function(e){be(e.bag),m(!0);var t,r,n=[],c=e.players[0],a="",s=Object(o.a)(ae.current);try{for(s.s();!(r=s.n()).done;){var i=r.value;i.name===c&&(i.turn=!0),n.push(i)}}catch(u){s.e(u)}finally{s.f()}ce(n),c===oe.current.name?(t="You get to play first",le(Object(l.a)(Object(l.a)({},oe.current),{},{turn:!0}))):t="".concat(c," gets to play first"),e.players.forEach((function(t,r){t===oe.current.name&&(t="".concat(t," (You)")),r+1===e.players.length?a+=t:a+="".concat(t,", then ")})),xe([{message:"".concat(t,". Also note that the turn order is, ").concat(a),overwrite:!1,type:"info",timeout:5}])})),he.on("validPlay",(function(e){ve(e.playerToPlay.name),e.name===oe.current.name&&le(Object(l.a)(Object(l.a)({},oe.current),{},{score:e.updatedScore})),ce(ye(e)),Ne(e),Z(Object(i.a)(new Set([].concat(Object(i.a)($.current),Object(i.a)(B.current))))),be(e.bag),we(e.bag.length),q([]),(6===e.turnSkips||e.bagIsEmpty&&e.rackIsEmpty)&&r(!0)}))}),[]);var ve=function(e){e===oe.current.name?le(Object(l.a)(Object(l.a)({},oe.current),{},{turn:!0})):le(Object(l.a)(Object(l.a)({},oe.current),{},{turn:!1}))},ye=function(e){var t,r=[],n=Object(o.a)(ae.current);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.name===e.playerToPlay.name?c.turn=!0:c.turn=!1,c.name===e.name&&(c.score=e.updatedScore),r.push(c)}}catch(a){n.e(a)}finally{n.f()}return r},we=function(e){var t;e<=7&&(t=0===e?"No pieces are left in the bag":1===e?"Only one piece is left in the bag":"Only ".concat(e," pieces are left in the bag."),setTimeout((function(){xe([{message:"Heads up! ".concat(t),type:"warning"}])}),7e3))},Ne=function(e){var t,r="It's ".concat(e.playerToPlay.name===oe.current.name?"your":"".concat(e.playerToPlay.name,"'s"));e.isTurnSkipped?(t=e.name===oe.current.name?"You skipped your turn.":"Turn skipped by ".concat(e.name,"."),t+=" ".concat(r," turn to play")):e.isTurnSwapped?(t=e.name===oe.current.name?"You swapped pieces for your turn.":"".concat(e.name," swapped pieces for turn."),t+=" ".concat(r," turn to play")):(t=e.name===oe.current.name?"You played '".concat(e.word,"' worth ").concat(e.score," points."):"".concat(e.name," played '").concat(e.word,"' worth ").concat(e.score," points."),t+=" ".concat(r," turn to play")),xe([{type:"info",message:t}])},ke=Object(y.jsxs)("div",{className:"flex space-x-10",children:[Object(y.jsx)(H,{}),Object(y.jsx)("div",{className:"px-10"}),Object(y.jsx)(ge,{})]});return Object(y.jsx)("div",{className:"container mx-auto p-10 flex h-screen justify-center",children:Object(y.jsx)(O.Provider,{value:{notifications:pe,setNotifications:xe},children:Object(y.jsx)(x.Provider,{value:Oe,children:Object(y.jsxs)(h.Provider,{value:{validDrag:te,setValidDrag:ee},children:[b.current?ke:Object(y.jsx)(ze,{}),Object(y.jsx)(We,{})]})})})})};var Ge=function(){return Object(y.jsx)(p.Provider,{value:m,children:Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(Re,{})})})},Fe=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,144)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(Ge,{})}),document.getElementById("root")),Fe()},60:function(e,t,r){},61:function(e,t,r){}},[[116,1,2]]]);
//# sourceMappingURL=main.36f1f3d9.chunk.js.map